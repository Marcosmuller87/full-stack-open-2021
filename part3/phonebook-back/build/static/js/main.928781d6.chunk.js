(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(16),i=t.n(o),a=(t(21),t(3)),u=t(0),d=function(e){var n=e.newName,t=e.newNumber,c=e.handleName,r=e.handleNumber,o=e.addPerson;return Object(u.jsxs)("form",{onSubmit:o,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:c,type:"text"})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:t,onChange:r,type:"number"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){var n=e.persons,t=e.filter,c=e.deletePerson,r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(u.jsx)("div",{children:r.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[e.name,":\xa0",e.number,"\xa0",Object(u.jsx)("button",{onClick:function(){return c(e.id)},children:"Delete"})]})},e.name)}))})},l=function(e){var n=e.handleFilter;return Object(u.jsxs)("div",{children:["Filter by name: ",Object(u.jsx)("input",{onChange:n,type:"text"})]})},j=t(4),b=t.n(j),f="/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},m=function(e){var n=e.notification,t=e.className;return null==n?null:Object(u.jsx)("div",{className:t,children:n})},O=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),i=Object(a.a)(o,2),j=i[0],b=i[1],f=Object(c.useState)(""),O=Object(a.a)(f,2),v=O[0],p=O[1],x=Object(c.useState)(""),w=Object(a.a)(x,2),g=w[0],N=w[1],y=Object(c.useState)(null),k=Object(a.a)(y,2),S=k[0],C=k[1];Object(c.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(m,{notification:(null===S||void 0===S?void 0:S.message)||(null===S||void 0===S?void 0:S.error),className:(null===S||void 0===S?void 0:S.message)?"message":"error"}),Object(u.jsx)("h2",{children:"Filter"}),Object(u.jsx)(l,{persons:t,handleFilter:function(e){N(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new"}),Object(u.jsx)(d,{handleName:function(e){b(e.target.value)},handleNumber:function(e){p(e.target.value)},newName:j,newNumber:v,addPerson:function(e){e.preventDefault();var n={name:j,number:v},c=t.find((function(e){return e.name===j}));c?window.confirm("".concat(j," is already added to the phonebook. Replace the old number with a new one?"))&&(h.update(c.id,n).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e})))})).catch((function(e){C({error:"Information of ".concat(c.name," has already been removed from the server")}),setTimeout((function(){C(null)}),5e3),r(t.filter((function(e){return e.id!==c.id})))})),C({message:"Updated ".concat(c.name,"'s number to ").concat(v)}),setTimeout((function(){C(null)}),5e3),b(""),p("")):h.create(n).then((function(e){r(t.concat(e)),C("Added ".concat(e.name)),setTimeout((function(){C(null)}),5e3),b(""),p("")}))}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{persons:t,filter:g,deletePerson:function(e){window.confirm("Delete ".concat(t.find((function(n){return n.id===e})).name,"?"))&&h.remove(e).then((function(){r(t.filter((function(n){return n.id!==e})))}))}})]})};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.928781d6.chunk.js.map